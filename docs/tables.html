<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gastos P√∫blicos DF</title>
    <link rel="stylesheet" href="static/css/style.css"/>
  </head>
  <body>
    <header>
      <nav class="header-container">
        <div class="logo-container">
          <img
            src="static/images/logo.png"
            alt="Logo"
            class="header-logo"
          />
          <h1>Monitoramento De Gastos P√∫blicos - DF</h1>
        </div>
        <div class="header-buttons">
          <!-- Bot√µes de navega√ß√£o, com classe 'active' para a p√°gina atual -->
          
          <a href="index.html" class="btn-header">In√≠cio</a>
          <a href="charts.html" class="btn-header active">An√°lise de Gr√°ficos</a>
          
        </div>
      </nav>
    </header>

    <!-- Conte√∫do da p√°gina -->
    <main>
<!-- Barra de navega√ß√£o -->
<div class="barra-navegacao">
    <a href="charts.html" class="nav-link">Gr√°ficos</a>
    <a href="tables.html" class="nav-link active">Tabelas</a>
</div>

<!-- Conte√∫do principal -->
<main>
    <div class="content">
        <h2>Detalhes dos Gastos P√∫blicos</h2>

        <!-- Formul√°rio de pesquisa -->
        <form method="get" action="tables.html" style="margin-bottom: 20px;">
            <input type="text" name="search" placeholder="Pesquisar por nome..." value="" style="padding: 8px; font-size: 14px; border: 1px solid #ccc; border-radius: 5px; width: 250px;">
            <button type="submit" style="padding: 8px 15px; background-color: #0056b3; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.3s ease;">Pesquisar</button>
        </form>

        <!-- Tabela -->
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
            <thead>
                <tr>
                    <!-- Coluna Nome com bot√£o de ordena√ß√£o -->
                    <th style="border-bottom: 2px solid #ccc; padding: 10px; text-align: left;">
                        Nome
                        <a href="tables?sort=name&amp;sort_order=asc" style="text-decoration: none; color: #0056b3;">
                            
                                <span>‚áµ</span> <!-- Seta padr√£o -->
                            
                        </a>
                    </th>

                    <!-- Coluna Despesa com bot√£o de ordena√ß√£o -->
                    <th style="border-bottom: 2px solid #ccc; padding: 10px; text-align: left;">
                        Despesa
                        <a href="tables?sort=expense&amp;sort_order=asc" style="text-decoration: none; color: #0056b3;">
                            
                                <span>‚áµ</span> <!-- Seta padr√£o -->
                            
                        </a>
                    </th>
                </tr>
            </thead>
            <tbody>
                <!-- Dados din√¢micos do lado cliente -->
                {% for item in data %}
                <tr class="data-row">
                    <td style="padding: 10px; border-bottom: 1px solid #ccc;">{{ item.name }}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ccc;">R$ {{ item.expense }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Exibi√ß√£o de resultados -->
        {% if data %}
            <p style="margin-top: 20px;">Exibindo {{ data|length }} resultado(s).</p>
        {% else %}
            <p style="margin-top: 20px;">Nenhum resultado encontrado.</p>
        {% endif %}
    </div>
</main>

<script>
    // Dados do lado cliente (simulando dados est√°ticos aqui, substitua conforme necess√°rio)
    const data = [
        { name: "Jo√£o", expense: 200 },
        { name: "Maria", expense: 150 },
        { name: "Carlos", expense: 300 },
        { name: "Ana", expense: 250 },
    ];

    // Vari√°veis de estado
    let searchQuery = '';
    let sortBy = 'name';
    let sortOrder = 'asc';

    const searchInput = document.getElementById("searchInput");
    const searchButton = document.getElementById("searchButton");
    const tableBody = document.querySelector("#dataTable tbody");
    const sortLinks = document.querySelectorAll(".sort-link");

    // Fun√ß√£o para renderizar a tabela
    const renderTable = (filteredData) => {
        tableBody.innerHTML = "";
        filteredData.forEach(item => {
            const row = `
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ccc;">${item.name}</td>
                    <td style="padding: 10px; border-bottom: 1px solid #ccc;">R$ ${item.expense}</td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });
    };

    // Fun√ß√£o de busca
    searchButton.addEventListener("click", () => {
        searchQuery = searchInput.value.toLowerCase();
        const filteredData = data.filter(item => item.name.toLowerCase().includes(searchQuery));
        renderTable(filteredData);
    });

    // Fun√ß√£o de ordena√ß√£o
    sortLinks.forEach(link => {
        link.addEventListener("click", (event) => {
            event.preventDefault();
            const sortKey = event.target.closest("a").dataset.sort;
            sortOrder = event.target.closest("a").dataset.order === 'asc' ? 'desc' : 'asc';
            event.target.closest("a").dataset.order = sortOrder;

            // Atualizando o √≠cone da seta
            if (sortKey === 'name') {
                document.getElementById("sortIconName").textContent = sortOrder === 'asc' ? "üîº" : "üîΩ";
            } else {
                document.getElementById("sortIconExpense").textContent = sortOrder === 'asc' ? "üîº" : "üîΩ";
            }

            const sortedData = [...data].sort((a, b) => {
                if (sortOrder === 'asc') {
                    return a[sortKey] > b[sortKey] ? 1 : -1;
                } else {
                    return a[sortKey] < b[sortKey] ? 1 : -1;
                }
            });

            renderTable(sortedData);
        });
    });

    // Renderizar tabela inicial com dados
    renderTable(data);
</script>

    <!-- Rodap√© global, presente em todas as p√°ginas -->
    <footer>
      <div class="footer-container">
        <img
          src="static/images/footer-logo.png"
          alt="Logo do rodap√©"
          class="footer-logo"
        />
        <p>
          ¬© 2024 Monitoramento de Gastos P√∫blicos - Todos os direitos
          reservados.
        </p>
      </div>
    </footer>
  </body>
</html>
